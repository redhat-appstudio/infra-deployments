apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: spi-system
namePrefix: spi-

resources:
  - https://github.com/redhat-appstudio/service-provider-integration-operator/config/vault/openshift?ref=c2e561959b9b399d3e233a24ad2eb335b860d39f
  - vault_role.yaml
  - vault_rolebinding.yaml

patches:
- target:
    kind: Route
    name: vault
  patch: |-
    - op: replace
      path: /spec/to/name
      value: spi-vault

patchesStrategicMerge:
  - |-
    apiVersion: v1
    kind: Namespace
    metadata:
      name: spi-vault
    $patch: delete
