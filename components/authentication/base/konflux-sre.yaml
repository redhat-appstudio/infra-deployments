apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: konflux-sre
rules:
  # Grant READ-ONLY access (plus delete) to pod-related resources
  # Creating/exec'ing pods can be used to access secrets, so create/update/patch are blocked
  # Delete is allowed for cleanup
  - apiGroups:
      - ''
    resources:
      - pods
      - pods/attach
      - pods/binding
      - pods/ephemeralcontainers
      - pods/eviction
      - pods/exec
      - pods/log
      - pods/portforward
      - pods/proxy
      - pods/status
      - podtemplates
      - replicationcontrollers
      - replicationcontrollers/scale
      - replicationcontrollers/status
    verbs:
      - get
      - list
      - watch
      - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: konflux-sre
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: konflux-sre
subjects:
  - apiGroup: rbac.authorization.k8s.io
    kind: Group
    name: konflux-sre
