apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: external-secrets-operator

resources:
- networkpolicy-default-deny.yaml
- networkpolicy-allow-egress.yaml
- networkpolicy-allow-ingress.yaml
- networkpolicy-allow-same-ns.yaml

helmGlobals:
  chartHome: .

helmCharts:
- name: external-secrets
  releaseName: external-secrets-operator
  namespace: external-secrets-operator
  valuesFile: values.yaml

# Override the ESO image with the Konflux-built image
images:
- name: ghcr.io/external-secrets/external-secrets
  newName: quay.io/konflux-ci/external-secrets-operator
  digest: sha256:c56bc9680964058929c95773ca90d517aba93e8d31d20a3af4a80fa8fd3dc28f
