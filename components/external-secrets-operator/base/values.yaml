# External Secrets Operator Helm Chart Values
# Version: 0.19.0
# Configuration matches the OLM deployment OperatorConfig

# Image configuration - matches OLM CSV version 0.19.0
image:
  repository: ghcr.io/external-secrets/external-secrets
  tag: "v0.19.0"

# Replica count
replicaCount: 1

# Install CRDs - CRITICAL: Must be true to install CustomResourceDefinitions
installCRDs: true

# Service Account
serviceAccount:
  create: true
  name: external-secrets-operator

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 65534
  fsGroup: 65534

# Controller resources (matching OperatorConfig spec.resources)
# Note: The helm chart uses .Values.resources directly, not controller.resources
resources:
  requests:
    cpu: 100m
    memory: 512Mi
  limits:
    memory: 512Mi
    cpu: 500m

# Cert Controller resources (matching OperatorConfig spec.certController.resources)
certController:
  enabled: true
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      memory: 128Mi
      cpu: 200m
  # Enable metrics Service for cert-controller
  metrics:
    service:
      enabled: true
      port: 8080

# Webhook resources (matching OperatorConfig spec.webhook.resources)
webhook:
  enabled: true
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      memory: 128Mi
      cpu: 200m
  # Enable metrics port on webhook Service
  metrics:
    service:
      enabled: true
      port: 8080

# Prometheus configuration (matching OperatorConfig spec.prometheus)
prometheus:
  enabled: true
  service:
    port: 8080

# Metrics Service - enables the metrics Service from helm chart
# This creates external-secrets-operator-metrics Service with correct selectors
metrics:
  service:
    enabled: true
    port: 8080

# Logging
logLevel: info

bitwarden-sdk-server:
  enabled: false
