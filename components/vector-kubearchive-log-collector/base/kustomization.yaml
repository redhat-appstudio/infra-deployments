apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: product-kubearchive-logging
commonAnnotations:
  argocd.argoproj.io/sync-wave: "-1"

resources:
- rbac.yaml
- sa.yaml
- scc.yaml
- ka-logging-service-monitor.yaml

patches:
  # Set PVC retention policy to Delete for ingester StatefulSet
  - path: base/ingester-pvc-retention-patch.yaml
    target:
      kind: StatefulSet
      name: loki-ingester