apiVersion: keycloak.org/v1alpha1
kind: KeycloakRealm
metadata:
  name: redhat-external
spec:
  instanceSelector:
    matchLabels:
      appstudio.redhat.com/keycloak: dev
  realm:
    id: hac-sso
    realm: redhat-external
    displayName: Redhat External for HAC
    accessTokenLifespan: 7200
    accessTokenLifespanForImplicitFlow: 900
    enabled: true
    sslRequired: external
    registrationAllowed: false
    registrationEmailAsUsername: false
    rememberMe: false
    verifyEmail: false
    loginWithEmailAllowed: true
    duplicateEmailsAllowed: false
    resetPasswordAllowed: false
    editUsernameAllowed: false
    bruteForceProtected: false
    permanentLockout: false
    maxFailureWaitSeconds: 900
    minimumQuickLoginWaitSeconds: 60
    waitIncrementSeconds: 60
    quickLoginCheckMilliSeconds: 1000
    maxDeltaTimeSeconds: 43200
    failureFactor: 30
    roles:
      realm:
        - id: a8d38f0f-7d83-41b7-8236-55998c531760
          name: default-roles-redhat-external
          description: ${role_default-roles}
          composite: true
          composites:
            realm:
              - offline_access
              - uma_authorization
            client:
              account:
                - manage-account
                - view-profile
          clientRole: false
          containerId: hac-sso
          attributes: {}
        - id: 4c73ed54-7750-4045-9c3b-8f43b05b0cb4
          name: uma_authorization
          description: ${role_uma_authorization}
          composite: false
          clientRole: false
          containerId: hac-sso
          attributes: {}
        - id: 18e6ca8a-034d-428a-a0f6-3e5824c74d67
          name: offline_access
          description: ${role_offline-access}
          composite: false
          clientRole: false
          containerId: hac-sso
          attributes: {}
      client:
        cloud-services: []
        realm-management:
          - id: 47a7732c-f371-4cc1-935d-1c517614eb74
            name: manage-identity-providers
            description: ${role_manage-identity-providers}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 92dac8f6-33df-4375-8d47-302065b0c47c
            name: view-events
            description: ${role_view-events}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: c5cd8e35-13cf-4d17-9002-33bc7049ed49
            name: view-users
            description: ${role_view-users}
            composite: true
            composites:
              client:
                realm-management:
                  - query-groups
                  - query-users
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: d7d79f8e-a86a-4437-9ef6-c27b086ff005
            name: manage-authorization
            description: ${role_manage-authorization}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 3b31e4a3-a4b9-404e-a416-e559f59a18d5
            name: view-clients
            description: ${role_view-clients}
            composite: true
            composites:
              client:
                realm-management:
                  - query-clients
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 8a5e47b0-f5cc-4f42-a4c0-7cf61107cfca
            name: impersonation
            description: ${role_impersonation}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 5f7b54ef-f854-42f3-95bd-a9ea962fb629
            name: create-client
            description: ${role_create-client}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 3b687d3d-8229-4fd5-8cdd-0aee6d4bf8ca
            name: query-clients
            description: ${role_query-clients}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 6c5fce09-33e2-40b6-823e-dcf644fa6053
            name: manage-realm
            description: ${role_manage-realm}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: afaf3f99-7750-4c6a-bca6-b35b26d2f8ff
            name: query-users
            description: ${role_query-users}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 59cf3bbe-6c5a-4401-a996-9116d71d35f4
            name: manage-clients
            description: ${role_manage-clients}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 03361fc0-ff06-4d09-ab1f-ab900fe4d57b
            name: manage-users
            description: ${role_manage-users}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: b1b19c8d-fd64-4960-a409-dafc455d504e
            name: query-groups
            description: ${role_query-groups}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 3ea88ffd-28a4-423c-8fb4-f832f610b2dc
            name: realm-admin
            description: ${role_realm-admin}
            composite: true
            composites:
              client:
                realm-management:
                  - manage-identity-providers
                  - view-events
                  - view-users
                  - view-clients
                  - manage-authorization
                  - impersonation
                  - create-client
                  - query-clients
                  - manage-realm
                  - query-users
                  - manage-clients
                  - manage-users
                  - query-groups
                  - view-realm
                  - query-realms
                  - view-identity-providers
                  - view-authorization
                  - manage-events
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 71a4d66d-50bc-4ef3-8da8-36f31c7b6b3e
            name: view-realm
            description: ${role_view-realm}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: ce2a40fc-5fd5-4735-b0dd-b5d707dd5ee2
            name: query-realms
            description: ${role_query-realms}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: e1403844-fc62-4522-8181-64a0395a9608
            name: view-identity-providers
            description: ${role_view-identity-providers}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 76acc1f2-7d2b-40f2-af4d-a3dff5403470
            name: manage-events
            description: ${role_manage-events}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
          - id: 1bab32ce-418a-4779-875a-aa550bc5720e
            name: view-authorization
            description: ${role_view-authorization}
            composite: false
            clientRole: true
            containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
            attributes: {}
        security-admin-console: []
        admin-cli: []
        account-console: []
        broker:
          - id: 9b3c893f-3860-46d7-82c6-4e6066380871
            name: read-token
            description: ${role_read-token}
            composite: false
            clientRole: true
            containerId: 6dec4db5-3920-4e47-b671-e7cfeb915e96
            attributes: {}
        account:
          - id: 62cc2451-60f3-4420-ab11-106280ea5127
            name: manage-account
            description: ${role_manage-account}
            composite: true
            composites:
              client:
                account:
                  - manage-account-links
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: 8a7a5a05-e697-445e-8dee-122227311297
            name: delete-account
            description: ${role_delete-account}
            composite: false
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: aae2d09f-6aed-476e-93fa-68e0604bb6ac
            name: view-consent
            description: ${role_view-consent}
            composite: false
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: 79c590ab-dada-4ef0-bfa1-8c85d35e7d84
            name: view-applications
            description: ${role_view-applications}
            composite: false
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: 7da35324-12d5-44e5-9c6a-9f1c1a2dccd0
            name: manage-consent
            description: ${role_manage-consent}
            composite: true
            composites:
              client:
                account:
                  - view-consent
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: 09d2dc7b-e18e-49a5-ae06-0f01cfa876b8
            name: manage-account-links
            description: ${role_manage-account-links}
            composite: false
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
          - id: 3b5813d3-3ecb-489b-8bc8-38288b2c898a
            name: view-profile
            description: ${role_view-profile}
            composite: false
            clientRole: true
            containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
            attributes: {}
    defaultRole:
      id: a8d38f0f-7d83-41b7-8236-55998c531760
      name: default-roles-redhat-external
      description: ${role_default-roles}
      composite: true
      clientRole: false
      containerId: hac-sso
    otpPolicyType: totp
    otpPolicyAlgorithm: HmacSHA1
    otpPolicyInitialCounter: 0
    otpPolicyDigits: 6
    otpPolicyLookAheadWindow: 1
    otpPolicyPeriod: 30
    otpSupportedApplications:
      - FreeOTP
      - Google Authenticator
    scopeMappings:
      - clientScope: offline_access
        roles:
          - offline_access
    clientScopeMappings:
      account:
        - client: account-console
          roles:
            - manage-account
    clients:
      - id: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
        clientId: account
        name: ${client_account}
        rootUrl: ${authBaseUrl}
        baseUrl: /realms/redhat-external/account/
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris:
          - /realms/redhat-external/account/*
        webOrigins: []
        notBefore: 0
        bearerOnly: false
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: false
        serviceAccountsEnabled: false
        publicClient: true
        frontchannelLogout: false
        protocol: openid-connect
        attributes: {}
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
      - id: 664b265b-5730-4e51-aee1-fa1aa9427323
        clientId: account-console
        name: ${client_account-console}
        rootUrl: ${authBaseUrl}
        baseUrl: /realms/redhat-external/account/
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris:
          - /realms/redhat-external/account/*
        webOrigins: []
        notBefore: 0
        bearerOnly: false
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: false
        serviceAccountsEnabled: false
        publicClient: true
        frontchannelLogout: false
        protocol: openid-connect
        attributes:
          pkce.code.challenge.method: S256
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        protocolMappers:
          - id: fab196f4-8200-41eb-8d63-173256763e71
            name: audience resolve
            protocol: openid-connect
            protocolMapper: oidc-audience-resolve-mapper
            consentRequired: false
            config: {}
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
      - id: 617194f2-e0ff-4ee1-9fb1-15bed4fa4a77
        clientId: admin-cli
        name: ${client_admin-cli}
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris: []
        webOrigins: []
        notBefore: 0
        bearerOnly: false
        consentRequired: false
        standardFlowEnabled: false
        implicitFlowEnabled: false
        directAccessGrantsEnabled: true
        serviceAccountsEnabled: false
        publicClient: true
        frontchannelLogout: false
        protocol: openid-connect
        attributes: {}
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
      - id: 6dec4db5-3920-4e47-b671-e7cfeb915e96
        clientId: broker
        name: ${client_broker}
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris: []
        webOrigins: []
        notBefore: 0
        bearerOnly: true
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: false
        serviceAccountsEnabled: false
        publicClient: false
        frontchannelLogout: false
        protocol: openid-connect
        attributes: {}
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
      - id: 9a5018a7-5f92-40c9-b8f1-63f53bc32a68
        clientId: cloud-services
        name: cloud-services
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris:
          - '*'
        webOrigins:
          - '*'
        notBefore: 0
        bearerOnly: false
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: true
        serviceAccountsEnabled: false
        publicClient: true
        frontchannelLogout: false
        protocol: openid-connect
        attributes:
          saml.force.post.binding: "false"
          saml.multivalued.roles: "false"
          frontchannel.logout.session.required: "false"
          oauth2.device.authorization.grant.enabled: "false"
          backchannel.logout.revoke.offline.tokens: "false"
          saml.server.signature.keyinfo.ext: "false"
          use.refresh.tokens: "true"
          oidc.ciba.grant.enabled: "false"
          backchannel.logout.session.required: "true"
          client_credentials.use_refresh_token: "false"
          require.pushed.authorization.requests: "false"
          saml.client.signature: "false"
          saml.allow.ecp.flow: "false"
          id.token.as.detached.signature: "false"
          saml.assertion.signature: "false"
          saml.encrypt: "false"
          saml.server.signature: "false"
          exclude.session.state.from.auth.response: "false"
          saml.artifact.binding: "false"
          saml_force_name_id_format: "false"
          acr.loa.map: '{}'
          tls.client.certificate.bound.access.tokens: "false"
          saml.authnstatement: "false"
          display.on.consent.screen: "false"
          token.response.type.bearer.lower-case: "false"
          saml.onetimeuse.condition: "false"
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: true
        nodeReRegistrationTimeout: -1
        defaultClientScopes:
          - web-origins
          - acr
          - nameandterms
          - profile
          - roles
          - email
          - api.console
        optionalClientScopes:
          - address
          - phone
          - profile_level.name_and_dev_terms
          - offline_access
          - microprofile-jwt
      - id: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
        clientId: realm-management
        name: ${client_realm-management}
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris: []
        webOrigins: []
        notBefore: 0
        bearerOnly: true
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: false
        serviceAccountsEnabled: false
        publicClient: false
        frontchannelLogout: false
        protocol: openid-connect
        attributes: {}
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
      - id: 50b949b2-3b56-4cc1-a8b6-90951a6ad9c6
        clientId: security-admin-console
        name: ${client_security-admin-console}
        rootUrl: ${authAdminUrl}
        baseUrl: /admin/redhat-external/console/
        surrogateAuthRequired: false
        enabled: true
        clientAuthenticatorType: client-secret
        redirectUris:
          - /admin/redhat-external/console/*
        webOrigins:
          - +
        notBefore: 0
        bearerOnly: false
        consentRequired: false
        standardFlowEnabled: true
        implicitFlowEnabled: false
        directAccessGrantsEnabled: false
        serviceAccountsEnabled: false
        publicClient: true
        frontchannelLogout: false
        protocol: openid-connect
        attributes:
          pkce.code.challenge.method: S256
        authenticationFlowBindingOverrides: {}
        fullScopeAllowed: false
        nodeReRegistrationTimeout: 0
        protocolMappers:
          - id: f0d04249-2f8f-4069-8566-4f3aa35e7690
            name: locale
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: locale
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: locale
              jsonType.label: String
        defaultClientScopes:
          - web-origins
          - acr
          - profile
          - roles
          - email
        optionalClientScopes:
          - address
          - phone
          - offline_access
          - microprofile-jwt
    clientScopes:
      - id: 2e00768f-fe3c-48d8-92bf-35afbbcc30c0
        name: web-origins
        description: OpenID Connect scope for add allowed web origins to the access token
        protocol: openid-connect
        attributes:
          include.in.token.scope: "false"
          display.on.consent.screen: "false"
          consent.screen.text: ""
        protocolMappers:
          - id: d54340bc-16f0-45a4-9464-436ef7583a81
            name: allowed web origins
            protocol: openid-connect
            protocolMapper: oidc-allowed-origins-mapper
            consentRequired: false
            config: {}
      - id: 172816fd-8450-4e82-b33a-89f9181373a4
        name: phone
        description: 'OpenID Connect built-in scope: phone'
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
          consent.screen.text: ${phoneScopeConsentText}
        protocolMappers:
          - id: 02c09b15-1210-4a6c-b6e4-c2452031712a
            name: phone number
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: phoneNumber
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: phone_number
              jsonType.label: String
          - id: 6a96110b-3a23-48cd-8d90-cefa6228e5e1
            name: phone number verified
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: phoneNumberVerified
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: phone_number_verified
              jsonType.label: boolean
      - id: c7d788d8-5836-4500-b4a9-083c2f6c2960
        name: role_list
        description: SAML role list
        protocol: saml
        attributes:
          consent.screen.text: ${samlRoleListScopeConsentText}
          display.on.consent.screen: "true"
        protocolMappers:
          - id: a70dad06-f7a0-4c3d-8c08-cf440c7918da
            name: role list
            protocol: saml
            protocolMapper: saml-role-list-mapper
            consentRequired: false
            config:
              single: "false"
              attribute.nameformat: Basic
              attribute.name: Role
      - id: 656d7d46-bcd6-4b5a-bcfa-20ad0f13e9fe
        name: offline_access
        description: 'OpenID Connect built-in scope: offline_access'
        protocol: openid-connect
        attributes:
          consent.screen.text: ${offlineAccessScopeConsentText}
          display.on.consent.screen: "true"
      - id: 65c7d0bd-243d-42d2-b7f2-64ce2fa7ca7e
        name: profile
        description: 'OpenID Connect built-in scope: profile'
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
          consent.screen.text: ${profileScopeConsentText}
        protocolMappers:
          - id: e3f5a475-0722-4293-bcd5-2bad6bc7dde6
            name: locale
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: locale
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: locale
              jsonType.label: String
          - id: 7b91d2ec-3c9f-4e7d-859e-67900de0c6b6
            name: full name
            protocol: openid-connect
            protocolMapper: oidc-full-name-mapper
            consentRequired: false
            config:
              id.token.claim: "true"
              access.token.claim: "true"
              userinfo.token.claim: "true"
          - id: d301c7b7-0d97-4d37-8527-a5c63d461a3c
            name: family name
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: lastName
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: family_name
              jsonType.label: String
          - id: 71c6caff-3f17-47db-8dc1-42f9af01832e
            name: updated at
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: updatedAt
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: updated_at
              jsonType.label: long
          - id: 6bcb9f8d-94be-48b3-bd47-2ba7746d65ac
            name: picture
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: picture
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: picture
              jsonType.label: String
          - id: d497ef2e-5d5b-4d8a-9392-04e09f5c51b6
            name: nickname
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: nickname
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: nickname
              jsonType.label: String
          - id: f8167604-073d-47ea-9fd1-6ec754ce5c49
            name: website
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: website
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: website
              jsonType.label: String
          - id: 48d8f2ff-d0e6-41f2-839e-3e51951ee078
            name: profile
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: profile
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: profile
              jsonType.label: String
          - id: 463f80df-1554-4f0b-889f-1e6f2308ba17
            name: username
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: username
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: preferred_username
              jsonType.label: String
          - id: c347cd4f-a2e1-4a5f-a676-e779beb7bccf
            name: given name
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: firstName
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: given_name
              jsonType.label: String
          - id: 665672fd-872e-4a58-b586-b6f6fddbc1ac
            name: zoneinfo
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: zoneinfo
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: zoneinfo
              jsonType.label: String
          - id: b76e46cc-98a9-4bf7-8918-0cc8eb2dfc8c
            name: gender
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: gender
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: gender
              jsonType.label: String
          - id: cb1a55e3-87f0-4efb-b5c0-d5de40344bfc
            name: birthdate
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: birthdate
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: birthdate
              jsonType.label: String
          - id: 9b5c1c92-c937-4216-9fdb-db23d6eee788
            name: middle name
            protocol: openid-connect
            protocolMapper: oidc-usermodel-attribute-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: middleName
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: middle_name
              jsonType.label: String
      - id: 672455b2-1e92-44f6-9fb6-fe2017995aed
        name: profile_level.name_and_dev_terms
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
      - id: 45e1900d-2199-45fc-9028-a39497a6cdd5
        name: email
        description: 'OpenID Connect built-in scope: email'
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
          consent.screen.text: ${emailScopeConsentText}
        protocolMappers:
          - id: 149315f5-4595-4794-b11f-f4b68b1c9f7a
            name: email
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: email
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: email
              jsonType.label: String
          - id: 26f0791c-93cf-4241-9c92-5528e67b9817
            name: email verified
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: emailVerified
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: email_verified
              jsonType.label: boolean
      - id: ed5b578d-d48f-4023-bc23-892a76d018df
        name: roles
        description: OpenID Connect scope for add user roles to the access token
        protocol: openid-connect
        attributes:
          include.in.token.scope: "false"
          display.on.consent.screen: "true"
          consent.screen.text: ${rolesScopeConsentText}
        protocolMappers:
          - id: 569264db-b779-49c9-a9b0-cfa0f8c249db
            name: audience resolve
            protocol: openid-connect
            protocolMapper: oidc-audience-resolve-mapper
            consentRequired: false
            config: {}
          - id: 6d2e188f-4022-474e-84ad-19a84e054fc5
            name: realm roles
            protocol: openid-connect
            protocolMapper: oidc-usermodel-realm-role-mapper
            consentRequired: false
            config:
              user.attribute: foo
              access.token.claim: "true"
              claim.name: realm_access.roles
              jsonType.label: String
              multivalued: "true"
          - id: f7b77092-577d-4492-b803-a3cdf2a436fe
            name: client roles
            protocol: openid-connect
            protocolMapper: oidc-usermodel-client-role-mapper
            consentRequired: false
            config:
              user.attribute: foo
              access.token.claim: "true"
              claim.name: resource_access.${client_id}.roles
              jsonType.label: String
              multivalued: "true"
      - id: b2240814-1831-48d1-9682-7eb5231bbc76
        name: acr
        description: OpenID Connect scope for add acr (authentication context class reference) to the token
        protocol: openid-connect
        attributes:
          include.in.token.scope: "false"
          display.on.consent.screen: "false"
        protocolMappers:
          - id: bc946f16-8378-4edc-9137-f5d5db96da88
            name: acr loa level
            protocol: openid-connect
            protocolMapper: oidc-acr-mapper
            consentRequired: false
            config:
              id.token.claim: "true"
              access.token.claim: "true"
      - id: 47f93745-58c6-4f19-9ef4-768cd6df7ab7
        name: microprofile-jwt
        description: Microprofile - JWT built-in scope
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "false"
        protocolMappers:
          - id: ca164b36-12dc-47fc-b0e6-e40949a5042e
            name: upn
            protocol: openid-connect
            protocolMapper: oidc-usermodel-property-mapper
            consentRequired: false
            config:
              userinfo.token.claim: "true"
              user.attribute: username
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: upn
              jsonType.label: String
          - id: 4314b495-934a-4948-b9ae-fc9c17354cf0
            name: groups
            protocol: openid-connect
            protocolMapper: oidc-usermodel-realm-role-mapper
            consentRequired: false
            config:
              multivalued: "true"
              user.attribute: foo
              id.token.claim: "true"
              access.token.claim: "true"
              claim.name: groups
              jsonType.label: String
      - id: 710757d5-c717-44de-ad25-2133cf75b0a6
        name: nameandterms
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
      - id: 1d8a366c-3fae-4134-b58a-4ed5dc3b0022
        name: api.console
        protocol: openid-connect
        attributes: 
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
      - id: b4120472-4f73-4659-ae6b-d24bd45c4fa3
        name: address
        description: 'OpenID Connect built-in scope: address'
        protocol: openid-connect
        attributes:
          include.in.token.scope: "true"
          display.on.consent.screen: "true"
          consent.screen.text: ${addressScopeConsentText}
        protocolMappers:
          - id: 8bf14f81-76b3-4970-9993-a270b52ae28a
            name: address
            protocol: openid-connect
            protocolMapper: oidc-address-mapper
            consentRequired: false
            config:
              user.attribute.formatted: formatted
              user.attribute.country: country
              user.attribute.postal_code: postal_code
              userinfo.token.claim: "true"
              user.attribute.street: street
              id.token.claim: "true"
              user.attribute.region: region
              access.token.claim: "true"
              user.attribute.locality: locality
    defaultDefaultClientScopes:
      - role_list
      - profile
      - email
      - roles
      - web-origins
      - acr
      - api.console
    smtpServer: {}
    loginTheme: rh-sso
    eventsEnabled: false
    eventsListeners:
      - jboss-logging
    enabledEventTypes: []
    adminEventsEnabled: false
    adminEventsDetailsEnabled: false
    identityProviders: []
    identityProviderMappers: []
    internationalizationEnabled: false
    supportedLocales: []
    authenticationFlows:
      - id: e7eb3ebc-fb97-4223-ad80-592fc5fce191
        alias: Account verification options
        description: Method with which to verity the existing account
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: idp-email-verification
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: ALTERNATIVE
            priority: 20
            flowAlias: Verify Existing Account by Re-authentication
            userSetupAllowed: false
      - id: 1198e723-0fc8-4378-adcb-5111b25ac8e0
        alias: Authentication Options
        description: Authentication options.
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: basic-auth
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: basic-auth-otp
            authenticatorFlow: false
            requirement: DISABLED
            priority: 20
            userSetupAllowed: false
          - authenticator: auth-spnego
            authenticatorFlow: false
            requirement: DISABLED
            priority: 30
            userSetupAllowed: false
      - id: 17b80820-8c58-48b4-abd7-3d5a75a501ca
        alias: Browser - Conditional OTP
        description: Flow to determine if the OTP is required for the authentication
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: conditional-user-configured
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: auth-otp-form
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
      - id: 87917dac-6623-4091-a031-f669c00727a0
        alias: Direct Grant - Conditional OTP
        description: Flow to determine if the OTP is required for the authentication
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: conditional-user-configured
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: direct-grant-validate-otp
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
      - id: c3e67dde-8f8c-4ad7-a901-48dc2f136e62
        alias: First broker login - Conditional OTP
        description: Flow to determine if the OTP is required for the authentication
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: conditional-user-configured
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: auth-otp-form
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
      - id: 1c4a841c-8127-42c8-92b1-70ce02485b23
        alias: Handle Existing Account
        description: Handle what to do if there is existing account with same email/username like authenticated identity provider
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: idp-confirm-link
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: REQUIRED
            priority: 20
            flowAlias: Account verification options
            userSetupAllowed: false
      - id: 55164d9f-4366-464c-88d2-90bfd2261711
        alias: Reset - Conditional OTP
        description: Flow to determine if the OTP should be reset or not. Set to REQUIRED to force.
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: conditional-user-configured
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: reset-otp
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
      - id: 7a328721-4ecf-4195-b3eb-d43710806436
        alias: User creation or linking
        description: Flow for the existing/non-existing user alternatives
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticatorConfig: create unique user config
            authenticator: idp-create-user-if-unique
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: ALTERNATIVE
            priority: 20
            flowAlias: Handle Existing Account
            userSetupAllowed: false
      - id: aa99db6e-a68c-41a6-a1b0-ceeb05835033
        alias: Verify Existing Account by Re-authentication
        description: Reauthentication of existing account
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: idp-username-password-form
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: CONDITIONAL
            priority: 20
            flowAlias: First broker login - Conditional OTP
            userSetupAllowed: false
      - id: fb06241d-d1fd-4cd0-8e25-a2e7c526d5ed
        alias: browser
        description: browser based authentication
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: auth-cookie
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 10
            userSetupAllowed: false
          - authenticator: auth-spnego
            authenticatorFlow: false
            requirement: DISABLED
            priority: 20
            userSetupAllowed: false
          - authenticator: identity-provider-redirector
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 25
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: ALTERNATIVE
            priority: 30
            flowAlias: forms
            userSetupAllowed: false
      - id: e845c181-be95-4661-bf17-ad8930302e2d
        alias: clients
        description: Base authentication for clients
        providerId: client-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: client-secret
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 10
            userSetupAllowed: false
          - authenticator: client-jwt
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 20
            userSetupAllowed: false
          - authenticator: client-secret-jwt
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 30
            userSetupAllowed: false
          - authenticator: client-x509
            authenticatorFlow: false
            requirement: ALTERNATIVE
            priority: 40
            userSetupAllowed: false
      - id: 4be61b3e-bed6-4641-b0b3-2745f67e2d3f
        alias: direct grant
        description: OpenID Connect Resource Owner Grant
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: direct-grant-validate-username
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: direct-grant-validate-password
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: CONDITIONAL
            priority: 30
            flowAlias: Direct Grant - Conditional OTP
            userSetupAllowed: false
      - id: f5aa97fe-9f57-4358-bcff-99259d556744
        alias: docker auth
        description: Used by Docker clients to authenticate against the IDP
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: docker-http-basic-authenticator
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
      - id: 4cac59c3-abc3-461f-9c98-0af10402304f
        alias: first broker login
        description: Actions taken after first broker login with identity provider account, which is not yet linked to any Keycloak account
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticatorConfig: review profile config
            authenticator: idp-review-profile
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: REQUIRED
            priority: 20
            flowAlias: User creation or linking
            userSetupAllowed: false
      - id: 3dee6aae-172e-44ee-8d20-13f1f757ab0a
        alias: forms
        description: Username, password, otp and other auth forms.
        providerId: basic-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: auth-username-password-form
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: CONDITIONAL
            priority: 20
            flowAlias: Browser - Conditional OTP
            userSetupAllowed: false
      - id: 4e344966-4bca-47ac-a450-3251f9cf16db
        alias: http challenge
        description: An authentication flow based on challenge-response HTTP Authentication Schemes
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: no-cookie-redirect
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: REQUIRED
            priority: 20
            flowAlias: Authentication Options
            userSetupAllowed: false
      - id: dc323cc9-6e1c-4653-8509-9ae6f62bb54e
        alias: registration
        description: registration flow
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: registration-page-form
            authenticatorFlow: true
            requirement: REQUIRED
            priority: 10
            flowAlias: registration form
            userSetupAllowed: false
      - id: 73bdf37c-12fa-4c48-89bf-aa28139e7bb1
        alias: registration form
        description: registration form
        providerId: form-flow
        topLevel: false
        builtIn: true
        authenticationExecutions:
          - authenticator: registration-user-creation
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
          - authenticator: registration-profile-action
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 40
            userSetupAllowed: false
          - authenticator: registration-password-action
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 50
            userSetupAllowed: false
          - authenticator: registration-recaptcha-action
            authenticatorFlow: false
            requirement: DISABLED
            priority: 60
            userSetupAllowed: false
      - id: 6ac53ea6-30f4-4b40-b2a8-85a91514a24f
        alias: reset credentials
        description: Reset credentials for a user if they forgot their password or something
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: reset-credentials-choose-user
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
          - authenticator: reset-credential-email
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 20
            userSetupAllowed: false
          - authenticator: reset-password
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 30
            userSetupAllowed: false
          - authenticatorFlow: true
            requirement: CONDITIONAL
            priority: 40
            flowAlias: Reset - Conditional OTP
            userSetupAllowed: false
      - id: 1eae4e92-51ce-49c9-85d7-aaf4d1f437ee
        alias: saml ecp
        description: SAML ECP Profile Authentication Flow
        providerId: basic-flow
        topLevel: true
        builtIn: true
        authenticationExecutions:
          - authenticator: http-basic-authenticator
            authenticatorFlow: false
            requirement: REQUIRED
            priority: 10
            userSetupAllowed: false
    authenticatorConfig:
      - id: 651040d9-3852-4081-8cb3-665474382f87
        alias: create unique user config
        config:
          require.password.update.after.registration: "false"
      - id: a03358ad-6f70-4eb9-a1fa-bea18fb856f3
        alias: review profile config
        config:
          update.profile.on.first.login: missing
    userManagedAccessAllowed: false
    users:
      - credentials:
          - type: password
            value: user1
        email: user1@user.us
        emailVerified: true
        enabled: true
        firstName: user1
        id: user1
        username: user1
        clientRoles:
          realm-management:
            - "manage-users"
