---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: rhel-appsre-vault
spec:
  provider:
    vault:
      # This store is only deployed to internal cluster, so we use the internal vault server instead of the external one
      server: "https://vault.corp.redhat.com:8200/"
      path: apps
      version: v2
      # Reference to the Red Hat internal CA certificates
      caProvider:
        type: ConfigMap
        name: trusted-ca
        namespace: appsre-vault
        key: ca-bundle.crt
      auth:
        appRole:
          path: approle
          roleId: osci
          secretRef:
            name: rhel-appsre-vault-approle
            key: secret-id
            namespace: appsre-vault
