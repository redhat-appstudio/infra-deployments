apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: konflux-kyverno

generators:
  - kyverno-helm-generator.yaml

images:
  - name: reg.kyverno.io/kyverno/kyverno
    newName: quay.io/konflux-ci/kyverno/kyverno
    digest: sha256:e3776bc7a94b199cb0556216879e339ed017ae46ff969cba0f4259d2c2caf16a
  - name: reg.kyverno.io/kyverno/kyvernopre
    newName: quay.io/konflux-ci/kyverno/kyverno-init
    digest: sha256:62f80ea23ccca53e0ee9cb6f2a91ad3d736f382957eb4657af438cf2f3acd527
  - name: reg.kyverno.io/kyverno/background-controller
    newName: quay.io/konflux-ci/kyverno/kyverno-background
    digest: sha256:33d9c32bb620936bc71f5ad810073e5a2ab2131ea4ae3bc9c70bdfd721905940
  - name: reg.kyverno.io/kyverno/cleanup-controller
    newName: quay.io/konflux-ci/kyverno/kyverno-cleanup
    digest: sha256:0f2dc4c541ebb264d113d726f1f4cb8f886a5fda736d7a837bca95a5882a9dc1
  - name: reg.kyverno.io/kyverno/kyverno-cli
    newName: quay.io/konflux-ci/kyverno/kyverno-cli
    digest: sha256:e92bdbf8a34c5a8fae33383624bdecee6a787158266c2d0f577d4fc7b4466118

patches:
  - path: job_resources.yaml
    target:
      group: batch
      version: v1
      kind: Job
      name: konflux-kyverno-migrate-resources
