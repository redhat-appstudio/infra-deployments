apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: konflux-kyverno

generators:
  - kyverno-helm-generator.yaml

images:
  - name: reg.kyverno.io/kyverno/kyverno
    newName: quay.io/konflux-ci/kyverno/kyverno
    newTag: ab0a95de3acc13d5e2e37ebc15b27782bdfe86d4
  - name: reg.kyverno.io/kyverno/kyvernopre
    newName: quay.io/konflux-ci/kyverno/kyverno-init
    newTag: ab0a95de3acc13d5e2e37ebc15b27782bdfe86d4
  - name: reg.kyverno.io/kyverno/background-controller
    newName: quay.io/konflux-ci/kyverno/kyverno-background
    newTag: ab0a95de3acc13d5e2e37ebc15b27782bdfe86d4
  - name: reg.kyverno.io/kyverno/cleanup-controller
    newName: quay.io/konflux-ci/kyverno/kyverno-cleanup
    newTag: ab0a95de3acc13d5e2e37ebc15b27782bdfe86d4
  - name: reg.kyverno.io/kyverno/kyverno-cli
    newName: quay.io/konflux-ci/kyverno/kyverno-cli
    newTag: ab0a95de3acc13d5e2e37ebc15b27782bdfe86d4

patches:
  - path: job_resources.yaml
    target:
      group: batch
      version: v1
      kind: Job
      name: konflux-kyverno-migrate-resources
