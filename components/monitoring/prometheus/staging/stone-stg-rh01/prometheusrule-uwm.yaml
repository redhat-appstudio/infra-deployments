apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: prometheus-recording-rules-uwm-namespace
  namespace: openshift-user-workload-monitoring
spec:
  groups:
    - name: rules_container_memory_working_set_bytes_namespace_container
      rules:
      - expr: |
          avg by (namespace,container) (rate(container_memory_working_set_bytes{job="kubelet", metrics_path="/metrics/cadvisor", image!=""}[5m]))
        record: namespace_container:container_memory_working_set_bytes
