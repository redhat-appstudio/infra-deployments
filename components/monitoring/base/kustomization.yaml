apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - install_prometheus.yaml
  - prometheus-view.yaml

namespace: "appstudio-workload-monitoring"
patches:
  - target:
      kind: OperatorGroup
      name: openshift-user-workload-monitoring-stack
    patch: |-
      - op: replace
        path: /spec/targetNamespaces
        value: "appstudio-workload-monitoring"
  - target:
      kind: ClusterRoleBinding
      name: prometheus-view
    patch: |-
      - op: replace
        path: /subjects/0/namespace
        value: "appstudio-workload-monitoring"
